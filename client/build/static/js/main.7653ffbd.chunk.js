(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1e3:function(e,t,n){},1003:function(e,t,n){},1008:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(45),c=n.n(o),s=(n(600),n(581)),i=n(398),u=n(161),l=n.n(u),f=n(396),h=n(551),m=n(552),p=n(583),b=n(579),d=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).callBackendAPI=Object(f.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/ping");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),a.handleFetchTweets=Object(f.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.fetchTweets().then((function(e){return a.setState({tweetData:e.express})})),console.log(a.state.tweetData.statuses);case 2:case"end":return e.stop()}}),e)}))),a.fetchTweets=Object(f.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/twitter_test");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),a.state={tweetData:1},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.callBackendAPI().then((function(t){return e.setState({ping:t.express})})).catch((function(e){return console.log(e)}))}},{key:"handleFilterArray",value:function(){for(var e=this.state.tweetData.statuses,t=0,n=new Date,a=0;a<e.length;a++){new Date(e[a].created_at).getDate()===n.getDate()&&t++}console.log(t)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null)}}]),n}(a.Component),g=n(170),w=n(392),v=n(451),x=n(582),j=n(12),E=n(1016),k=n(270),O=(n(1e3),n(1001),n(1002),n(1003),new v.default({source:new x.a})),y=Object(j.fromLonLat)([-.126286,51.508623]),S=new g.default({view:new w.a({center:y,zoom:14}),layers:[O]});var D=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)({lon:"0",lat:"0"}),u=Object(i.a)(c,2),l=u[0],f=u[1],h=Object(a.useState)(0),m=Object(i.a)(h,2),p=m[0],b=m[1];Object(a.useEffect)((function(){fetch("/client/App",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((function(e){if(e.ok)return e.json()})).then((function(e){var t=e.express.statuses,n=0,a=(new Date).getTime()-36e5;console.log(a,"hour ago"),console.log(t);for(var r=0;r<t.length;r++){var o=new Date(t[r].created_at);if(console.log(o.getTime(),"tweet date"),!(o.getTime()>a))break;n++}b(n)}))}),[l]);var g=function(){o(!n)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement(k.MapComponent,{map:S}),r.a.createElement(d,null),r.a.createElement(k.SimpleButton,{style:{position:"fixed",top:"30px",right:"30px"},onClick:g,icon:"bars"}),r.a.createElement(E.a,{title:"isitbusyornot?",placement:"right",onClose:g,visible:n,mask:!1},r.a.createElement("div",null,"Where do you want to go?"),r.a.createElement(k.NominatimSearch,{countrycodes:"gb",placeholder:"isitbusyornot...?",key:"search",map:S,onSelect:function(e,t){var n=e.lon,a=e.lat,r=Object(s.a)(e,["lon","lat"]);if(r&&r.boundingbox){var o=t.getView(),c=[r.boundingbox[2],r.boundingbox[0],r.boundingbox[3],r.boundingbox[1]];c=c.map((function(e){return parseFloat(e)})),c=(0,j.transformExtent)(c,"EPSG:4326",o.getProjection().getCode()),o.fit(c,{duration:500})}f({lon:n,lat:a})}}),r.a.createElement("hr",null),r.a.createElement("div",null,"Tweets in the last hour: ",r.a.createElement("b",null,p)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},595:function(e,t,n){e.exports=n(1008)},600:function(e,t,n){},995:function(e,t){}},[[595,1,2]]]);
//# sourceMappingURL=main.7653ffbd.chunk.js.map